import{_ as Q}from"./index-BPj9B9dy.js";import{z as o,u as A,F as C,_ as L,a as y,b as R,c as S,t as X,d as G}from"./vee-validate-zod-28-Ua9AI.js";import{_ as k,a as T,b as B,c as P,d as m}from"./SelectValue.vuevuetypescriptsetuptruelang-BFfflIII.js";import{_ as q,n as Y,o as K,L as I}from"./Switch.vuevuetypescriptsetuptruelang-BvqsniLQ.js";import{L as D,u as Z,_ as h}from"./http-VlAZSTuv.js";import{d as O,f as E,o as f,u as e,b as l,e as $,w as t,i as n,n as M,g as w,c as x,y as c,F as z,m as ee,G as le,x as te,M as U,H as ae}from"./index-DS9d49-V.js";/* empty css                                                              */import{_ as ne,a as J,b as W,c as ie}from"./TabsTrigger.vuevuetypescriptsetuptruelang-Bxsmm_sl.js";import"./createLucideIcon-BNbeFIQN.js";import"./PopperContent-BDfdC-3x.js";import"./useMutation-Cpcdwd3M.js";const oe={class:"space-y-0.5"},se=O({__name:"LogConsoleConfigForm",props:{initialValues:{},isMutating:{type:Boolean}},emits:["updateLogConsoleConfig"],setup(_,{emit:r}){const s=_,g=r,p=o.object({enable:o.boolean(),level:o.union([o.literal("DEBUG"),o.literal("INFO"),o.literal("WARN"),o.literal("ERROR")]),format:o.union([o.literal("JSON"),o.literal("TEXT")])}),u=A({validationSchema:X(p),initialValues:s.initialValues}).handleSubmit(b=>{g("updateLogConsoleConfig",b)});return(b,a)=>(f(),E("form",{class:"flex flex-col w-full max-w-lg space-y-6",onSubmit:a[0]||(a[0]=(...i)=>e(u)&&e(u)(...i))},[l(e(C),{name:"enable"},{default:t(({value:i,handleChange:N})=>[l(e(L),{class:"flex flex-row items-center justify-between p-4 border rounded-lg"},{default:t(()=>[$("div",oe,[l(e(y),null,{default:t(()=>a[1]||(a[1]=[n("Enable Log Handler")])),_:1})]),l(e(R),null,{default:t(()=>[l(e(q),{"model-value":i,disabled:s.isMutating,"aria-readonly":"","onUpdate:modelValue":N},null,8,["model-value","disabled","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:1}),l(e(C),{name:"level"},{default:t(({componentField:i})=>[l(e(L),null,{default:t(()=>[l(e(y),null,{default:t(()=>a[2]||(a[2]=[n("Log Level")])),_:1}),l(e(k),M(w(i)),{default:t(()=>[l(e(R),null,{default:t(()=>[l(e(T),{disabled:s.isMutating},{default:t(()=>[l(e(B),{placeholder:"Select log level"})]),_:1},8,["disabled"])]),_:1}),l(e(P),null,{default:t(()=>[l(e(m),{value:"DEBUG"},{default:t(()=>a[3]||(a[3]=[n(" Debug ")])),_:1}),l(e(m),{value:"INFO"},{default:t(()=>a[4]||(a[4]=[n(" Info ")])),_:1}),l(e(m),{value:"WARN"},{default:t(()=>a[5]||(a[5]=[n(" Warning ")])),_:1}),l(e(m),{value:"ERROR"},{default:t(()=>a[6]||(a[6]=[n(" Error ")])),_:1})]),_:1})]),_:2},1040),l(e(S))]),_:2},1024)]),_:1}),l(e(C),{name:"format"},{default:t(({componentField:i})=>[l(e(L),null,{default:t(()=>[l(e(y),null,{default:t(()=>a[7]||(a[7]=[n("Log Formatter")])),_:1}),l(e(k),M(w(i)),{default:t(()=>[l(e(R),null,{default:t(()=>[l(e(T),{disabled:s.isMutating},{default:t(()=>[l(e(B),{placeholder:"Select log format"})]),_:1},8,["disabled"])]),_:1}),l(e(P),null,{default:t(()=>[l(e(m),{value:"JSON"},{default:t(()=>a[8]||(a[8]=[n(" JSON ")])),_:1}),l(e(m),{value:"TEXT"},{default:t(()=>a[9]||(a[9]=[n(" Text ")])),_:1})]),_:1})]),_:2},1040),l(e(S))]),_:2},1024)]),_:1}),$("div",null,[l(e(Q),{type:"submit",disabled:s.isMutating},{default:t(()=>[s.isMutating?(f(),x(e(D),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):c("",!0),a[10]||(a[10]=n(" Save "))]),_:1},8,["disabled"])])],32))}}),ue={key:0,class:"flex items-center justify-center h-full"},de=O({__name:"LogConsoleConfigTab",props:{initialValues:{},isPending:{type:Boolean},isMutating:{type:Boolean}},emits:["updateLogConsoleConfig"],setup(_){const r=_;return(s,g)=>(f(),E(z,null,[r.isPending?(f(),E("div",ue,[l(e(D),{class:"w-4 h-4 animate-spin"})])):c("",!0),r.isPending?c("",!0):(f(),x(se,{key:1,"initial-values":r.initialValues,"is-mutating":r.isMutating,onUpdateLogConsoleConfig:g[0]||(g[0]=p=>s.$emit("updateLogConsoleConfig",p))},null,8,["initial-values","is-mutating"]))],64))}}),re={class:"space-y-0.5"},fe=O({__name:"LogFileConfigForm",props:{initialValues:{},isMutating:{type:Boolean}},emits:["updateLogFileConfig"],setup(_,{emit:r}){const s=_,g=r,p=o.object({enable:o.boolean(),path:o.string().default("logs/raybot.log"),rotationCount:o.number().min(1).default(10),format:o.union([o.literal("JSON"),o.literal("TEXT")]),level:o.union([o.literal("DEBUG"),o.literal("INFO"),o.literal("WARN"),o.literal("ERROR")])}),u=A({validationSchema:X(p),initialValues:s.initialValues}).handleSubmit(b=>{g("updateLogFileConfig",b)});return(b,a)=>(f(),E("form",{class:"flex flex-col w-full max-w-lg space-y-6",onSubmit:a[0]||(a[0]=(...i)=>e(u)&&e(u)(...i))},[l(e(C),{name:"enable"},{default:t(({value:i,handleChange:N})=>[l(e(L),{class:"flex flex-row items-center justify-between p-4 border rounded-lg"},{default:t(()=>[$("div",re,[l(e(y),null,{default:t(()=>a[1]||(a[1]=[n("Enable Log Handler")])),_:1})]),l(e(R),null,{default:t(()=>[l(e(q),{"model-value":i,disabled:s.isMutating,"aria-readonly":"","onUpdate:modelValue":N},null,8,["model-value","disabled","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:1}),l(e(C),{name:"path"},{default:t(({componentField:i})=>[l(e(L),null,{default:t(()=>[l(e(y),null,{default:t(()=>a[2]||(a[2]=[n("Log File Name")])),_:1}),l(e(G),M(w(i)),null,16),l(e(S))]),_:2},1024)]),_:1}),l(e(C),{name:"rotationCount"},{default:t(({componentField:i})=>[l(e(L),null,{default:t(()=>[l(e(y),null,{default:t(()=>a[3]||(a[3]=[n("Max Log Files Number")])),_:1}),l(e(G),ee({type:"number"},i),null,16),l(e(S))]),_:2},1024)]),_:1}),l(e(C),{name:"level"},{default:t(({componentField:i})=>[l(e(L),null,{default:t(()=>[l(e(y),null,{default:t(()=>a[4]||(a[4]=[n("Log Level")])),_:1}),l(e(k),M(w(i)),{default:t(()=>[l(e(R),null,{default:t(()=>[l(e(T),{disabled:s.isMutating},{default:t(()=>[l(e(B),{placeholder:"Select log level"})]),_:1},8,["disabled"])]),_:1}),l(e(P),null,{default:t(()=>[l(e(m),{value:"DEBUG"},{default:t(()=>a[5]||(a[5]=[n(" Debug ")])),_:1}),l(e(m),{value:"INFO"},{default:t(()=>a[6]||(a[6]=[n(" Info ")])),_:1}),l(e(m),{value:"WARN"},{default:t(()=>a[7]||(a[7]=[n(" Warning ")])),_:1}),l(e(m),{value:"ERROR"},{default:t(()=>a[8]||(a[8]=[n(" Error ")])),_:1})]),_:1})]),_:2},1040),l(e(S))]),_:2},1024)]),_:1}),l(e(C),{name:"format"},{default:t(({componentField:i})=>[l(e(L),null,{default:t(()=>[l(e(y),null,{default:t(()=>a[9]||(a[9]=[n("Log Formatter")])),_:1}),l(e(k),M(w(i)),{default:t(()=>[l(e(R),null,{default:t(()=>[l(e(T),{disabled:s.isMutating},{default:t(()=>[l(e(B),{placeholder:"Select log format"})]),_:1},8,["disabled"])]),_:1}),l(e(P),null,{default:t(()=>[l(e(m),{value:"JSON"},{default:t(()=>a[10]||(a[10]=[n(" JSON ")])),_:1}),l(e(m),{value:"TEXT"},{default:t(()=>a[11]||(a[11]=[n(" Text ")])),_:1})]),_:1})]),_:2},1040),l(e(S))]),_:2},1024)]),_:1}),$("div",null,[l(e(Q),{type:"submit",disabled:s.isMutating},{default:t(()=>[s.isMutating?(f(),x(e(D),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):c("",!0),a[12]||(a[12]=n(" Save "))]),_:1},8,["disabled"])])],32))}}),me={key:0,class:"flex items-center justify-center h-full"},ge=O({__name:"LogFileConfigTab",props:{initialValues:{},isPending:{type:Boolean},isMutating:{type:Boolean}},emits:["updateLogFileConfig"],setup(_){const r=_;return(s,g)=>(f(),E(z,null,[s.isPending?(f(),E("div",me,[l(e(D),{class:"w-4 h-4 animate-spin"})])):c("",!0),r.isPending?c("",!0):(f(),x(fe,{key:1,"initial-values":r.initialValues,"is-mutating":r.isMutating,onUpdateLogFileConfig:g[0]||(g[0]=p=>s.$emit("updateLogFileConfig",p))},null,8,["initial-values","is-mutating"]))],64))}}),pe={class:"text-sm text-muted-foreground"},Re=O({__name:"LoggingView",setup(_){const r=le(),s=ae(),g=r.query.tab??"console",p=Z();function j(v){s.replace({query:{tab:v}})}const{data:u,isPending:b}=Y(),{mutate:a,isPending:i}=K();function N(v){var d;u.value&&a({file:(d=u.value)==null?void 0:d.file,console:v},{onSuccess:()=>{var F;p.setQueryData([I],{file:(F=u.value)==null?void 0:F.file,console:v}),U.success("Log configuration updated successfully!")},onError:()=>{U.error("Failed to update log configuration")}})}function H(v){var d;u.value&&a({file:v,console:(d=u.value)==null?void 0:d.console},{onSuccess:()=>{var F;p.setQueryData([I],{file:v,console:(F=u.value)==null?void 0:F.console}),U.success("Log configuration updated successfully!")},onError:()=>{U.error("Failed to update log configuration")}})}return(v,d)=>{const F=te("RouterLink");return f(),x(h,null,{default:t(()=>[$("div",null,[d[2]||(d[2]=$("h1",{class:"text-xl font-semibold tracking-tight"}," Logging ",-1)),$("p",pe,[d[1]||(d[1]=n(" View logs for troubleshooting and system performance optimization ")),l(F,{to:"/restart",class:"text-blue-500"},{default:t(()=>d[0]||(d[0]=[n(" (Restart to apply changes) ")])),_:1})])]),l(e(ie),{"default-value":e(g),"onUpdate:modelValue":j},{default:t(()=>[l(e(ne),null,{default:t(()=>[l(e(J),{value:"console"},{default:t(()=>d[3]||(d[3]=[n(" Console Log ")])),_:1}),l(e(J),{value:"file"},{default:t(()=>d[4]||(d[4]=[n(" File Log ")])),_:1})]),_:1}),l(e(W),{value:"console"},{default:t(()=>{var V;return[(V=e(u))!=null&&V.console?(f(),x(de,{key:0,"initial-values":e(u).console,"is-pending":e(b),"is-mutating":e(i),onUpdateLogConsoleConfig:N},null,8,["initial-values","is-pending","is-mutating"])):c("",!0)]}),_:1}),l(e(W),{value:"file"},{default:t(()=>{var V;return[(V=e(u))!=null&&V.file?(f(),x(ge,{key:0,"initial-values":e(u).file,"is-pending":e(b),"is-mutating":e(i),onUpdateLogFileConfig:H},null,8,["initial-values","is-pending","is-mutating"])):c("",!0)]}),_:1})]),_:1},8,["default-value"])]),_:1})}}});export{Re as default};
